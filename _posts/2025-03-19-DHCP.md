---
title: DHCP란? 📶
date: 2025-03-19 01:46:21 +0900
categories: [Network]
tags: [Network]     # TAG 이름은 항상 소문자여야 합니다.
---
## 새 노트북을 사서 공유기에만 연결했을 뿐인데, 인터넷 접속을 어떻게 할까 ?

우리는 새 노트북을 사서 처음으로 Wi-Fi에 연결할 때, IP 주소를 직접 입력한 적이 없는데도 인터넷이 바로 연결된다.<br>
단순히 공유기에 접속했을 뿐인데, 어떻게 인터넷에 접속을 할 수 있게 된걸까?<br>
**바로 DHCP를 사용하여 IP 주소를 자동 할당 받기 때문이다.**

## DHCP란?
**DHCP는 네트워크 상의 장치(클라이언트)에게 자동으로 IP 주소 및 네트워크 설정을 할당하는 프로토콜이다.**<br>
수동으로 IP를 설정하는 정적 IP와 달리 DHCP를 사용하면 동적 IP를 자동으로 부여받을 수 있다.
> 💡 DHCP의 주요 역할
> - IP 주소 자동 할당 (수동 입력 필요 없음)
> - 서브넷 마스크, 기본 게이트웨이, DNS 서버 등의 네트워크 설정 자동 구성
> - IP 주소를 효율적으로 관리하고 중복을 방지

## DHCP의 주요 개념
1. DHCP 서버(DHCP Server)
   - **네트워크에 있는 클라이언트에게 IP 주소 및 네트워크 설정 정보를 할당하는 역할**을 한다.
   - 서버는 할당 가능한 IP 주소 풀(Address Pool)을 관리하며, 필요할 때 클라이언트에 할당한다.
2. DHCP 클라이언트(DHCP Client)
   - **DHCP 서버로부터 IP 주소를 요청하는 장치(PC,스마트폰)**이다.
   - 클라이언트는 DHCP 요청을 보내고, 서버로부터 응답을 받아 IP 주소를 자동으로 설정한다.
3. DHCP 릴레이 에이전트(DHCP Relay Agent)
   - 클라이언트가 DHCP 서버와 **같은 서브넷에 없을 경우, DHCP 요청을 중계하는 역할을한다.**
     - DHCP 서버와 클라이언트가 같은 네트워크(서브넷)에 있는 경우에는 클라이언트가 브로드캐스를 사용하여 직접 DHCP 서버와 통신할 수 있지만,
       다른 서브넷에 위치하면 브로드캐스트가 넘어가지 않기 때문에 클라이언트는 DHCP 서버를 찾을 수 없다. 이 떄 DHCP 릴레이 에이전트가 중간에서 역할을 수행한다.
   - 주로 **라우터가 DHCP 릴레이 역할을 수행**한다.

## DHCP 동작 과정
1. DHCP Discover(검색)
   - 클라이언트가 네트워크에 연결되면, 브로드캐스트(255.255.255.255) 메시지를 보내 DHCP 서버를 찾는다.
   - `나한테 IP 주소를 할당해 줄 수 있는 DHCP 서버가 해당 브로드캐스트 도메인에 있나요?` 하고 요청
2. DHCP Offer(제안)
   - DHCP 서버는 사용 가능한 IP 주소, 서브넷 마스크, 게이트웨이 정보 등을 클라이언트에게 보낸다.
   - `내가 네게 IP 주소를 할당해 줄 수 있어! 192.168.1.10을 써!`메시지를 클라이언트에게 전달
3. DHCP Request(요청)
   - 네트워크에 여러 대의 DHCP 서버가 존재하는 경우, 클라이언트가 브로드캐스트를 보내면 여러 DHCP 서버가 각각 다른 IP를 제안할 수 있고,
     이 경우 클라이언트는 가장 먼저 받은 DHCP Offer를 선택하여 DHCP Request를 보낸다.
   - 여러 대의 DHCP 서버가 존재하지 않아도 클라이언트는 Requset를 보낸다.
   - `192.168.1.10을 사용할게!` 메시지를 DHCP 서버에 전달
4. DHCP Acknowledge(승인)
   - DHCP 서버가 클라이언트의 요청을 승인하며, 최종적으로 IP 주소 할당을 완료
   - `Ok! 너에게 이제부터 192.168.1.10 해당 아이피 주소를 부여할게`

## DHCP 임대 및 갱신
- DHCP에서 할당된 IP 주소는 **영구적이지 않고 일정 기간 동안만 사용할 수 있도록 임대** 된다.
- 기본적으로 DHCP 서버는 **임대 기간이 지나면 IP 주소를 회수하고, 필요하면 재할당** 한다.

## DHCP 장점과 단점
1. 장점 ⭕
   - IP 주소 자동 관리 -> 수작업 필요 없음
   - 중복 IP 방지 -> 동일한 IP가 여러 장치에 할당되는 문제 예방
   - 네트워크 확장 용이 -> 새 장치를 연결해도 자동으로 IP 할당 가능
   - 네트워크 설정 자동화 -> 서브넷 마스크, DNS 등도 자동 설정 가능
2. 단점 ❌
   - DHCP 서버 장애시 IP 할당 불가
   - IP 변경 시 일시적인 네트워크 단절 가능
   - 보안 취약점 존재 -> DHCP 스푸핑 공격 가능



## 참고 유튜브 (생활 코딩)
{% include embed/youtube.html id='fTjscWEQ7zk' %}
{% include embed/youtube.html id='6NqldlvC26Y' %}
